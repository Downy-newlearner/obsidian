## **컨테이너와 가상 머신의 차이점**

- **공부 내용**:
    - **컨테이너**는 OS의 [[커널]]을 공유하여 실행되며, 가상 머신보다 가벼운 오버헤드를 가집니다. 또한, 컨테이너는 특정 애플리케이션과 그 실행 환경을 격리된 환경에서 실행할 수 있게 해 줍니다.
    - **가상 머신**은 하드웨어에서 가상화된 독립적인 운영 체제를 실행하며, 각각의 VM은 자체적인 운영 체제 커널을 가지고 있습니다. 이로 인해 리소스를 더 많이 소비하고, 부팅 시간이 길어집니다.
- **자료 검색 키워드**:
    - "container vs virtual machine"
    - "What is Docker container?"
    - "Virtualization vs containerization"


- 컨테이너의 구조
![[Pasted image 20250109181200.png|500]]

- 가상 머신의 구조
![[Pasted image 20250109181239.png|500]]
출처: https://learn.microsoft.com/ko-kr/virtualization/windowscontainers/about/containers-vs-vm


### 공통점
컨테이너와 가상 머신의 공통점 부터 알아보자.
	1. 둘 다 애플리케이션과 실행 환경을 '**격리**' 시킨다.
	2. 둘 다 CPU, 메모리, 디스크 등의 '**리소스를 할당**'하여 각 환경이 필요한 자원을 독립적으로 사용할 수 있게 한다.
	3. 둘 다 '**가상화**' 기술을 이용해 물리적인 하드웨어 자원을 효율적으로 분배하고, 여러 환경을 동시에 실행할 수 있게 한다.

위 설명들은 너무 딱딱하니까 쉽게 비유해보자. 
GPT에게 6살 아이도 이해할 수 있도록 설명해달라고 했다.

- **격리**: 여러 개의 프로그램이 서로 방해하지 않게 각자 독립적으로 작업할 수 있도록 하는 거예요. 마치 친구들이 각자 다른 방에서 놀고 있어서 서로 방해하지 않는 것처럼요.
    
- **리소스 할당**: 여러 프로그램이 한 개의 컴퓨터를 쓸 때, 컴퓨터의 힘을 나누어서 각 프로그램이 필요한 만큼만 사용할 수 있도록 하는 거예요. 친구들이 놀이터에서 차례대로 타는 놀이기구처럼요.
    
- **가상화**: 하나의 컴퓨터 안에서 여러 개의 작은 컴퓨터처럼 행동하게 하는 거예요. 마치 하나의 큰 집 안에 여러 개의 작은 방을 만들어서 각 방에서 다른 일을 할 수 있도록 하는 것처럼요.


### 차이점
이번엔 둘의 차이점을 알아보자.
1. **운영 체제**: 컨테이너는 호스트 운영 체제의 커널을 공유, 가상 머신은 각자 독립적인 운영 체제를 가짐.
2. **리소스 사용**: 컨테이너는 더 적은 리소스를 사용하고 빠르게 시작됨, 가상 머신은 더 많은 리소스를 사용하고 느리게 시작됨.
3. **격리 수준**: 컨테이너는 애플리케이션 수준에서 격리됨, 가상 머신은 하드웨어 수준에서 격리됨.


### 핵심
1. 가상 머신은 OS를 포함, 컨테이너는 미포함
2. 가상 머신은 자원을 독립적으로 할당받음, 컨테이너는 그렇지 않음
	- 예를 들어, 하나의 가상 머신은 CPU 2개, 메모리 4GB를 할당받고, 다른 가상 머신은 CPU 4개, 메모리 8GB를 할당받습니다. 각 VM은 다른 VM과 자원을 **독립적으로 사용**합니다.
	- 예를 들어, 두 개의 컨테이너가 같은 CPU나 메모리를 공유하며, 각 컨테이너는 리소스 사용을 **제어**받고 있지만, 물리적으로는 자원을 **각각 따로 할당받지 않**고, 하나의 호스트 시스템 자원을 나누어 사용합니다.


## **Docker의 구성 요소**

- **공부 내용**:
    - **Docker 이미지**: 애플리케이션과 그 실행 환경을 포함하는 불변의 템플릿입니다. 이미지에서 컨테이너가 생성됩니다.
    - **컨테이너**: 이미지를 기반으로 실행되는 가벼운 격리된 프로세스입니다. Docker에서는 컨테이너가 애플리케이션을 실제로 실행합니다.
    - **Docker Daemon**: Docker 서비스를 관리하는 백그라운드 프로세스입니다. `dockerd`라고 불리며, 클라이언트 요청을 받아 Docker 컨테이너와 이미지를 관리합니다.
    - **Docker CLI**: Docker를 관리하는 명령줄 도구입니다. `docker` 명령어를 사용하여 컨테이너와 이미지를 제어할 수 있습니다.
- **자료 검색 키워드**:
    - "What are Docker images?"
    - "Docker container overview"
    - "Docker Daemon and Docker CLI"

도커 컨테이너와 이미지(블로그)
https://tech.cloudmt.co.kr/2022/06/29/%EB%8F%84%EC%BB%A4%EC%99%80-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EC%9D%98-%EC%9D%B4%ED%95%B4-3-3-docker-image-dockerfile-docker-compose/

![[Pasted image 20250110023127.png|400]]
![[Pasted image 20250110023225.png|400]]
컨테이너 레이어는 읽기/쓰기 모두 가능한 계층으로 최상단 레이어에 추가된다.
컨테이너를 실행하고 진행되는 변경사항은 이 계층에 저장된다.

이미지 레이어는 읽기 전용 계층으로 다른 컨테이너와 공유할 수 있는 레이어
각 컨테이너가 공유하는 계층이다.

