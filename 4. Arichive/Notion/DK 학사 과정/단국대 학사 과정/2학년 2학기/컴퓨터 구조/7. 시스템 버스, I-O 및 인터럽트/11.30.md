cpu가 있고 다른 모든 저장장치(IO 장치)가 있다.
주 메모리도, 보조 메모리도 IO장치이다.
그래픽 카드, 키보드, 마우스도 IO장치이다.
전송속도가 각각 다르다
키보드, 마우스는 시리얼 디바이스
데이터를 8비트씩 직렬로 차례차레 보냄
굉장히 느린 인풋 장치이다.
보조 기억장치는 많은 아웃풋을 보낸다.
빠른 IO 장치이다.
각각의 IO를 컨트롤 할 수 있어야한다
이전엔 CPU의 역할이었다.
다양한 IO장치가 나오면서 CPU가 다 처리하는 것은 비효율적이게 되었다.
  
# 7.1 시스템 버스
---
- 시스템 버스
    - 데이터를 주고받기 위해 사용하는 버스
- 제어기
    - 디스크 제어기, 모니터 제어기, 프린터 제어기 등 각각 IO장치에 제어기가 붙어있다.
    - 그 제어기는 시스템 버스와 연결돼있다.
- 인터럽트 요구선
    
    - 키보드에서 데이터를 입력했을 때 CPU에 사용자가 데이터를 입력했음을 알려야한다.
    - 응용해서 사용자가 입력할 때까지 기다리게 할 수도 있다.
    - 옛날에는 비지—-를 사용했는데 지금은 인터럽트 방식을 사용한다.
    
      
    
## 버스의 종류
![[Source/Untitled 134.png|Untitled 134.png]]
- 버스를 통하여 상호간에 정보(프로그램 코드, 데이터, 제어 명령 등)를 교환하고, 동작 시간을 조정하기 위한 클록 신호도 전송한다.
- 버스는 많은 수의 전기 도체 선들로 구성된다.
1. 데이터 버스
    - 시스템 요소들 사이에 데이터를 전송하는 데 사용되는 선들의 집합
    - 양방향 전송
    - = MBR = 단어
    - 버스 폭(선들의 수)
        
        - CPU와 기억장치 사이에 한 번에 전송되는 비트
        - 128bit를 많이 사용하고 256bit까지도 사용한다.
        
          
        
2. 주소 버스
    - CPU ↔ 기억장치 간에 데이터 쓰기, 읽기 동작을 할 때, 해당 기억장소를 지정하는 주소를 전송하기 위한 선들의 집합
    - 단방향 전송
        - 주소는 CPU에 의해서만 발생되기 때문에 단방향 전송 기능만 있으면 된다.
        - CPU → 기억장치 및 I/O 제어기
    - =MAR=PC
    - 주소 버스의 비트 수에 의해 시스템에 접속될 수 있는 전체 기억장치 용량이 결정됨
    - 직접 주소지정 할 수 있는 기억장소의 단위 : 바이트 혹은 단어
        - 많은 경우에 바이트 단위 사용
3. 제어 버스
    - CPU와 기억장치 및 IO장치 사이에 제어 신호들을 전송하는 선들의 집합
  
## 주소버스의 폭(비트 수)에 따른 기억장치 용량
- 아직 단위 주소단위는 바이트(8bit)를 사용한다.
  
- 주소 버스가 16비트인 경우
    
    - 주소 지정 가능한 최대 기억장소들의 수 = 2^16
    - 바이트 단위 주소지정일 경우 최대 기억장치 용량 = 64Kbyte
    
    `p.5 참고`
    
      
    
## 제어 버스
- 기억장치 및 IO 장치와의 데이터 교환을 위한 제어신호들
    - 기억장치 쓰기 신호
    - 기억장치 읽기 신호
    - IO쓰기 신호
    - IO읽기 신호
- 버스 중재를 위한 제어신호들
    - 이 신호들의 집합을 중재버스 라고 부름
- 인터럽트 메커니즘을 위한 제어신호들
    - 이 신호들의 집합을 인터럽트 버스라고 부름
  
## 중재 버스
- 버스 마스터
    - 버스 사용의 주체가 되는 요소들
    - 확장 보드나 소프트웨어가 입출력하는 버스의 점유권을 쥐고 버스를 직접 제어하는 것을 말한다.
    - CPU, 주기억장치, 모든 제어기들은 버스 마스터가 될 수 있다.
- 버스 중재
    - 시스템 버스에 접속된 두 개 이상의 버스 마스터들이 동시에 버스를 사용하려고 할 때 순서대로 한 개의 마스터씩 버스를 사용할 수 있게 해주는 동작
- 중재 버스
    
    - 버스 중재를 위한 신호 선들의 집합
        - 버스 중재기로 들어가는 제어 선들이다.
    
    1. 버스 요구 신호
        - 버스 마스터가 버스 사용을 요구했음을 알리는 신호
    2. 버스 승인 신호
        - 버스 사용을 요구한 마스터에게 사용을 허가하는 신호
    3. 버스 사용중 신호
        - 현재 버스가 사용되고있음을 나타내는 신호
    
      
    
## 인터럽트 버스
- 인터럽트 요구 신호는 버스 중재기가 아닌 CPU로 들어간다.
    
    - IO장치가 요구했을 때 인터럽트 요구 신호는 CPU로 전달된다.
    
    1. 인터럽트 요구 신호
        1. IO 장치가 인터럽트를 요구했음을 알리는 신호
    2. 인터럽트 확인 신호
        1. CPU가 인터럽트 요구를 인식했음을 알리는 신호
    
      
    
- 그 이외의 제어신호들
    - 버스 클록 신호
        - ==동기식 버스==에서 버스 동작들의 시작 시간을 일치시키기 위해 제공되는 공통 클록 신호
    - 리셋 신호
        - 모든 시스템 요소들의 동작을 초기화시키는 신호
  
## 버스 대역폭
- 버스의 속도를 나타내는 척도
- 버스 클록의 주기에 의해 결정된다.
![[Source/Untitled 1 88.png|Untitled 1 88.png]]
- 사실 대부분의 경우 클럭 자체는 연산 장치가 스스로 발생시키는 것이 아니다. [메인보드](https://namu.wiki/w/%EB%A9%94%EC%9D%B8%EB%B3%B4%EB%93%9C)나 [그래픽 카드](https://namu.wiki/w/%EA%B7%B8%EB%9E%98%ED%94%BD%20%EC%B9%B4%EB%93%9C) 기판의 전원부를 자세히 보면 위 사진과 비슷한 형태의 부품([쿼츠](https://namu.wiki/w/%EC%BF%BC%EC%B8%A0) [무브먼트](https://namu.wiki/w/%EB%AC%B4%EB%B8%8C%EB%A8%BC%ED%8A%B8(%EC%8B%9C%EA%B3%84)) + IC칩)[[2...]](https://namu.wiki/w/%ED%81%B4%EB%9F%AD\#fn-2)이 있는데, 이게 전기적 진동을 만들어서 디지털 회로에 공급하는 것이다.
  
- 순서논리회로에 클럭이 필요한 이유를 쉽게 알려면 클럭을 [오케스트라](https://namu.wiki/w/%EC%98%A4%EC%BC%80%EC%8A%A4%ED%8A%B8%EB%9D%BC)의 [지휘자](https://namu.wiki/w/%EC%A7%80%ED%9C%98%EC%9E%90)에 비유하면 된다. 오케스트라에 지휘자가 없다면 각각의 연주자들의 템포가 달라져 공연이 엉망이 되듯이, 회로에서도 비슷한 현상이 일어난다. 이를 해결하기 위해 클래식에서 일정한 속도로 지휘를 해서 오케스트라의 전체적인 템포를 맞춘다면, 회로에 전기적 진동을 일정하게 가하고 그것을 기준으로 회로의 전체적인 템포를(타이밍을) 맞춘다고 생각하면 된다.
- 참고
    
    ![[Source/Untitled 2 60.png|Untitled 2 60.png]]
    
    - MHZ → 1마이크로s
    - GHZ → ns
    - 1/1000s = 1ms
    - 1/1000,000s = 1마이크로s
    - 1/1000,000,000s = 1ns
`9페이지 예제 풀어보기`
---
  
7.1.2 시스템 버스의 기본 동작
- 쓰기 동작 순서
  
- 읽기 동작 순서
  
- 버스 동작의 타이밍에 따른 버스의 분류
    
    1. 동기식 버스
        1. 클럭에 맞춰 동작이 수행된다.
    2. 비동기식 버스
        
        1. 이전 동작이 수행되어야 다음 동작이 수행된다.
        
          
        
          
        
          
        
    
    - 동기식 신호의 발생
        
        - 한 클럭이란 한 클럭 주기이다.
        - CPU가 기억장치로부터 데이터를 읽어오는 경우
            1. CPU가 주소+읽기 제어 신호를 주기억장치에 보냄
            2. 주기억장치에서 데이터인출 동작이 일어난다
            3. 인출된 데이터를 데이터 버스를 통해 CPU로 전달한다.
        
          
        
    - 비동기식 신호의 발생
        
        - MSYN 신호
            - Master Synch Signal 신호
            - 데이터를 쓰기 위해 제어신호를 보낸다 할 때 CPU가 보내게 되면 CPU가 마스터가 되고 그래픽카드에서 데이터를 읽어온다했을 때 그래픽카드는 Slave가 된다.
        - SSYN 신호
            - Slave Synch Signal
            - 데이터를 읽는 동작을 할 수 있게 해주는 신호를 Slave에게 보낸다
            - 슬레이브 싱크 신호가 트리거 되면 주소 위치에 접근되고
        - 읽기 신호
        - 주소 버스
            - Master는 그래픽 카드에 어딘가에 있는 데이터를 읽어오라는 요청을 한다.
            - 메모리에 있는 그 주소 값도 보내야한다.
        - 화살표는 신호가 어디 신호를 트리거하는지 나타내는 것이다.
        
          
        
        - CPU는 버스 상에 주소와 읽기 신호를 싣고, 신호가 안정될 때까지 잠시 기다린 후에, 주소와 제어 신호가 보내졌음을 알리기 위하여 마스터 동기 신호(MSYN)를 보낸다.
        - 기억 장치는 주소를 받아서 데이터를 인출한 다음에, 데이터를 버스에 싣고 슬레이브 동기 신호(SSYN)를 보냄으로써 응답하게 된다.
        - CPU는 SSYN 신호를 받은 즉시 데이터를 버스로부터 받아들이고, 주소와 읽기 신호 및 MSYN 신호를 제거한다.
        - MSYN 신호가 제거되었다는 것은 CPU가 데이터를 받아들였다는 것을 나타내므로, 기억장치도 SSYN 신호를 제거함으로써 읽기 동작이 완료된다.
        
          
        
    - 보통 동기식 버스를 사용한다.
  
## 동기식/비동기식 버스의 비교
- 동기식 버스
    - 장점
        - 인터페이스 회로 간단
    - 단점
        - 클록 주기보다 더 짧은 시간이 걸리는 버스 동작의 경우에는 동작이 완료된 후에도 다음 주기가 시작될 때까지 대기
            - 하지만 요즘 워낙 클락이 높아서 흔치 않은 일이다.
- 비동기식 버스
    - 장점
        - 각 버스 동작이 완료 즉시 다음 동작이 발생하므로 동기식 버스에서처럼 낭비되는 시간 없다.
        - 요즘은 필요가 없어서 동기식 버스를 거의 다 사용한다.
    - 단점
        - 인터페이스 회로 복잡
---
# 7.2 버스 중재
- 버스 경합
    - 한 개의 시스템 버스에 여러 버스 마스터들이 동시에 버스 사용을 요구하는 현상
- 버스 중재
    - 버스 경합이 발생하는 경우 특정 기준에 따라 버스 마스터들 중 한 개씩 순서대로 버스를 사용할 수 있게 해주는 동작
- 버스 중재기
    - 버스 중재를 수행하는 하드웨어
  
## 버스 중재 방식의 분류
1. 병렬 중재 방식
    1. 하드웨어 선은 많이 사용하지만 시간이 적게 걸린다.
2. 직렬 중재 방식
    1. 버스 요구와 승인 신호 선이 각각 한 개씩만 존재하며, 각 신호선을 버스 마스터들 간에 직렬로 접속하는 방식
    2. 하드웨어 선은 적게 사용하지만 시간이 오래걸린다.
  
- 버스 중재기의 위치에 따른 분류
    1. 중앙집중식 중재 방식
        1. 시스템 내의 버스 중재기가 한 개만 존재하는 방식
        2. 모든 버스 요구 신호들은 하나의 중재기에 보내지고, 중재기는 중재 원칙에 따라 선택한 버스 마스터에게 승인 신호를 보낸다.
    2. 분산식 중재 방식
        1. 여러 개의 버스 중재기들이 존재
        2. 버스 중재 동작이 각 마스터의 중재기에 의하여 이루어지는 방식
---
  
7.2.1 병렬 중재 방식
- 우선순위의 결정 방식에 따른 분류
    
    - 고정-우선순위 방식
        - 각 버스 마스터에 지정된 우선순위가 고정되어있는 방식
    - 가변-우선순위 방식
        - 우선순위를 변경할 수 있는 방식
    
      
    
## 중앙집중식 고정-우선순위 중재 방식(병렬)
- 중재기와 가장 가까이 위치한 버스 마스터가 높은 우선순위를 갖는다.
- 2,3이 동시에 요청하면 동시에 신호가 버스 중재기로 들어가고 기준에 따라 2를 선택한다.