# 백앤드 시나리오 분석 결과

## 📊 전체 요약

| 항목                      | 값                            |
| ------------------------- | ----------------------------- |
| **총 포스트 수**          | 3개                           |
| **텍스트 분석 상태**      | ❌ Fallback 모드 (API 실패)   |
| **이미지 매칭 상태**      | ⚠️ 부분 성공 (캡션 생성 실패) |
| **사용 가능한 이미지 수** | 11개                          |
| **매칭된 이미지**         | 3개 (모두 동일 이미지)        |

---

## 📝 포스트별 상세 분석

### Post 0: 결제 승인 API 재설계

| 필드              | 내용                                                                                      |
| ----------------- | ----------------------------------------------------------------------------------------- |
| **ID**            | 0                                                                                         |
| **날짜**          | 2025.01                                                                                   |
| **제목**          | 1)스타트업 (여행 예약 서비스)결제 승인 API 재설계 및 롤아웃 : 기존 단일 트랜잭션...       |
| **역할**          | ❌ 분석 실패 (Fallback)                                                                   |
| **핵심 내용**     | 결제 승인 로직 비동기식 전환, JPA 영속성 컨텍스트 관리, N+1 문제 해결, 처리 속도 30% 향상 |
| **매칭된 이미지** | API개선 예시2.jpeg                                                                        |
| **이미지 유사도** | 0.0 (캡션 생성 실패로 유사도 계산 불가)                                                   |
| **이미지 캡션**   | (없음)                                                                                    |

### Post 1: 학습 이벤트 수집 파이프라인

| 필드              | 내용                                                                                 |
| ----------------- | ------------------------------------------------------------------------------------ |
| **ID**            | 1                                                                                    |
| **날짜**          | 2025.06                                                                              |
| **제목**          | 2)교육 플랫폼 (신규 서비스 TF)학습 이벤트 수집 파이프라인 구축: 사용자의 '강의 시... |
| **역할**          | ❌ 분석 실패 (Fallback)                                                              |
| **핵심 내용**     | Kafka 메시지 브로커 도입, 초당 수천 건 이벤트 처리 시스템 구현                       |
| **매칭된 이미지** | API개선 예시2.jpeg                                                                   |
| **이미지 유사도** | 0.0 (캡션 생성 실패로 유사도 계산 불가)                                              |
| **이미지 캡션**   | (없음)                                                                               |

### Post 2: 분산 메시징 시스템 구축

| 필드              | 내용                                                                         |
| ----------------- | ---------------------------------------------------------------------------- |
| **ID**            | 2                                                                            |
| **날짜**          | 2025.11                                                                      |
| **제목**          | 3)프로젝트: 대규모 트래픽 처리용 분산 메시징 시스템 구축 (Kafka, Spring C... |
| **역할**          | ❌ 분석 실패 (Fallback)                                                      |
| **핵심 내용**     | Kafka 클러스터 구성 (3개 이상 브로커), AWS/GCP 환경, 디스크 I/O 최적화       |
| **매칭된 이미지** | API개선 예시2.jpeg                                                           |
| **이미지 유사도** | 0.0 (캡션 생성 실패로 유사도 계산 불가)                                      |
| **이미지 캡션**   | (없음)                                                                       |

---

## 🖼️ 이미지 매칭 결과

| 포스트 | 매칭된 이미지 파일명 | 유사도 | 상태              |
| ------ | -------------------- | ------ | ----------------- |
| Post 0 | API개선 예시2.jpeg   | 0.0    | ⚠️ 캡션 생성 실패 |
| Post 1 | API개선 예시2.jpeg   | 0.0    | ⚠️ 캡션 생성 실패 |
| Post 2 | API개선 예시2.jpeg   | 0.0    | ⚠️ 캡션 생성 실패 |

**문제점**: 모든 포스트가 동일한 이미지에 매칭되었고, 유사도가 모두 0.0입니다.

---

## 📁 사용 가능한 이미지 목록

| 번호 | 이미지 파일명         | 예상 관련성                |
| ---- | --------------------- | -------------------------- |
| 1    | API개선 예시.png      | Post 0 (결제 API)          |
| 2    | API개선 예시2.jpeg    | Post 0 (결제 API)          |
| 3    | 파이프라인예시.png    | Post 1 (이벤트 파이프라인) |
| 4    | 스프링부트-이미지.png | Post 0, 1, 2 (공통)        |
| 5    | 자바 이미지.png       | Post 0, 1, 2 (공통)        |
| 6    | mysql 이미지.png      | Post 0 (DB 최적화)         |
| 7    | redis GEO 이미지.png  | Post 1, 2 (인프라)         |
| 8    | redis GEO 이미지2.png | Post 1, 2 (인프라)         |
| 9    | aws 이미지.png        | Post 2 (AWS/GCP)           |
| 10   | 네이버 해커톤.png     | (관련성 낮음)              |
| 11   | 네이버 해커톤 2.jpeg  | (관련성 낮음)              |

---

## ⚠️ 발견된 문제점

### 1. 텍스트 분석 실패

- **원인**: Upstage API 호출 실패
- **결과**: Fallback 모드로 동작하여 기본 구조만 생성
- **영향**:
  - `title` 필드가 원본 텍스트의 앞부분으로 설정됨
  - `role` 필드가 "분석 실패"로 설정됨
  - 구조화된 분석 결과 없음

### 2. 이미지 캡션 생성 실패

- **원인**: Gemini API 호출 실패 또는 이미지 처리 오류
- **결과**: 모든 이미지의 캡션이 빈 문자열
- **영향**:
  - 유사도 계산 불가 (모두 0.0)
  - 의미 있는 이미지 매칭 불가
  - 모든 포스트가 동일한 이미지에 매칭됨

### 3. 이미지 매칭 로직 문제

- **현상**: 모든 포스트가 `API개선 예시2.jpeg`에 매칭됨
- **원인**: 유사도가 모두 0.0이므로 첫 번째 이미지가 선택됨
- **개선 필요**: 캡션 생성 실패 시 대체 매칭 전략 필요

---

## 🔧 개선 권장사항

### 즉시 개선 필요

1. **API 키 확인**: `.env` 파일의 `UPSTAGE_API_KEY`, `GOOGLE_API_KEY` 확인
2. **API 호출 로그 확인**: `api_logs/` 디렉토리의 오류 로그 확인
3. **이미지 처리 방식 개선**: Gemini API 이미지 업로드 방식 재검토

### 장기 개선

1. **Fallback 전략 강화**: 캡션 생성 실패 시 키워드 기반 매칭
2. **에러 복구 메커니즘**: 부분 실패 시에도 최대한 결과 생성
3. **로깅 강화**: 각 단계별 상세 로그 및 디버깅 정보

---

## 📈 성공률

| 단계             | 상태         | 성공률                |
| ---------------- | ------------ | --------------------- |
| JSON 파싱        | ✅ 성공      | 100%                  |
| 텍스트 분석      | ❌ 실패      | 0% (Fallback 사용)    |
| 이미지 캡션 생성 | ❌ 실패      | 0%                    |
| 이미지 매칭      | ⚠️ 부분 성공 | 0% (유사도 계산 불가) |

**전체 파이프라인 성공률**: 25% (JSON 파싱만 성공)

---

## 📝 결론

현재 파이프라인은 API 호출 실패로 인해 Fallback 모드로 동작하고 있습니다.
이미지 매칭은 기술적으로 완료되었으나, 캡션 생성 실패로 인해 의미 있는 매칭이 이루어지지 않았습니다.

**다음 단계**:

1. API 키 및 네트워크 연결 확인
2. API 로그 분석
3. 재실행 후 결과 확인
