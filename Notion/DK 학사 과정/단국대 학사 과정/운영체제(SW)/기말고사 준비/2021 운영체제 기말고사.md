### 4.1 일관성이 지켜지지 않는 상황을 space leak, garbage read, inconsistent, dangling reference라는 용어를 사용하여 설명하시오. (3점)
- **Space Leak**: 파일 시스템에서 데이터가 삭제된 후에도 그 공간이 해제되지 않고 계속 남아 있는 상황을 의미합니다. 이로 인해 사용 가능해야 할 공간이 반환되지 않음으로써 비효율적인 공간 사용이 발생합니다.
- **Garbage Read**: 파일을 읽는 동안 유효하지 않거나 이미 삭제된 데이터가 반환되는 상황입니다. 이는 파일 시스템이 올바르게 업데이트되지 않아서 발생할 수 있으며, 갱신되지 않은 데이터를 읽게 되어 불일치가 발생할 수 있습니다.
- **Inconsistent**: 파일 시스템의 상태가 서로 다른 부분 간에 일치하지 않는 상황입니다. 예를 들어, 파일 시스템 메타데이터 및 실제 데이터 블록 간의 불일치가 발생할 수 있습니다. 이는 동시 여러 쓰기 작업이 진행 중일 때, 시스템 충돌이 발생했을 때, 또는 파일 시스템이 올바르게 동기화되지 않았을 때 발생할 수 있습니다.
- **Dangling Reference**: 삭제된 객체가 참조된 상태를 의미합니다. 예를 들어, 파일이 삭제되었지만 여전히 그 파일을 가리키는 포인터가 남아 있을 때 발생합니다. 이로 인해 참조가 유효하지 않은 데이터 또는 메타데이터를 가리키게 되어 시스템 오류가 발생할 수 있습니다.
### 4.2 저널링을 사용하면 일관성을 유지할 수 있는데, 이 이유를 transaction, commit, redo, undo를 사용하여 설명하시오. (3점)
- **Transaction**: 저널링 파일 시스템에서 변경 작업은 트랜잭션 단위로 처리됩니다. 즉, 파일 시스템의 상태 변화를 하나의 트랜잭션으로 묶어서 실행합니다. 모든 변경 사항이 트랜잭션 내에서 수행되므로 중간 상태에서의 문제가 방지됩니다.
- **Commit**: 트랜잭션이 성공적으로 완료되면 ‘커밋’이 이루어집니다. 이때 저널에 해당 트랜잭션의 변경 사항이 기록됩니다. 커밋이 완료되면, 파일 시스템은 이 변경 사항들이 디스크에 안전하게 기록되었음을 보장합니다.
- **Redo**: 시스템 충돌 이후 재시작될 때, 저널에 기록된 트랜잭션 로그를 참조하여 완료되지 않은 트랜잭션을 다시 실행합니다. 이로 인해 시스템 충돌 시점 이전의 일관된 상태로 복구될 수 있습니다.
- **Undo**: 트랜잭션이 완료되지 않았거나 오류가 발생한 경우, 저널에 기록된 내용을 바탕으로 해당 트랜잭션을 무효화(롤백)하여 이전의 일관된 상태로 되돌립니다.
이처럼 저널링을 통해 트랜잭션 단위로 변경 사항을 관리하고, 트랜잭션의 성공 및 실패에 따라 변경 사항을 기록하고 롤백할 수 있어 파일 시스템의 일관성을 유지할 수 있습니다.
### 4.3 Ext3에는 data journal, ordered, writeback이라는 3가지 다른 유형의 저널링이 있는데, 각 저널링의 차이점을 논하시오 (3점)
- **Data Journal**: 이 모드는 데이터와 메타데이터가 둘 다 저널에 기록됩니다. 즉, 데이터의 쓰기와 관련된 모든 변경 사항이 먼저 저널에 기록된 후, 실제 위치에 기록됩니다. 이 방식은 가장 높은 수준의 일관성을 제공하지만, 성능에서 가장 많은 오버헤드를 유발합니다. 파일 시스템 충돌 후 복구 시 데이터 및 메타데이터의 높은 신뢰성을 제공합니다.
- **Ordered**: 이 모드는 메타데이터만 저널에 기록하고, 데이터는 실제 데이터 블록에 직접 쓰여집니다. 데이터 블록은 저널에 기록된 메타데이터의 변경이 이루어지기 전에 먼저 기록됩니다. 이로 인해 데이터와 메타데이터 간의 순서를 맞추어 데이터 일관성을 유지합니다. 성능은 Data Journal보다 좋지만, 쓰기 성능에서 일정한 부담이 있습니다.
- **Writeback**: 이 모드는 메타데이터 변경만 저널에 기록하고, 데이터는 저널에 기록하지 않습니다. 데이터 블록과 메타데이터 블록이 순서 없이 기록될 수 있습니다. 이로 인해 성능은 가장 빠르지만, 충돌 이후에는 데이터가 일관되지 않을 수 있습니다. 데이터 일관성에 대한 보증이 가장 낮습니다.
### 4.4 Github의 일관성 유지 방법과 OSTEP에서 배운 내용 파일시스템 일관성 유지 간에 공통점을 논하시오. (3점)
- **Transaction**: 두 시스템 모두 트랜잭션을 통해 일관성을 유지합니다. Github에서는 commit 단위로 코드 변경을 묶어서 처리하므로, 파일 시스템의 트랜잭션과 유사합니다. 커밋을 통해 코드 변경 사항이 일관되고 원자적으로 기록됩니다.
- **Commit**: Github의 커밋은 파일 시스템에서의 트랜잭션 커밋과 유사합니다. 양쪽 모두에서 변경 사항이 완전히 저장되어야만 일관성을 보장합니다. 커밋이 완료되지 않으면 변경 사항이 적용되지 않습니다.
- **Redo/Undo**: Github에서는 리포지토리의 상태를 과거 커밋으로 되돌릴 수 있는 기능이 있고, 파일 시스템에서는 저널 로그를 통해 트랜잭션을 재시도하거나 롤백할 수 있습니다. 이는 둘 다 시스템 충돌 또는 오류 이후에 일관된 상태를 복구할 수 있게 합니다.
- **일관성 보장**: 양쪽 모두 일관성을 유지하는 메커니즘을 제공하여, 다양한 상황에서 데이터의 무결성을 보장합니다. Github는 분산 환경에서 코드의 일관성을 보장하고, 파일 시스템은 데이터 저장 장치에서의 일관성을 보장합니다.
이와 같이, Github의 소스 코드 관리 방식과 파일 시스템의 일관성 유지 메커니즘은 트랜잭션 처리, 커밋, 복구 기술 등을 통해 공통적으로 일관성과 무결성을 보장합니다.