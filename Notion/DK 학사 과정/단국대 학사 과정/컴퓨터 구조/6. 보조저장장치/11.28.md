## 6.3.1 플래시 메모리
- 플래시 메모리의 등장
    - 한 개의 트랜지스터를 이용하여 한 비트를 저장할 수 있고 전력 소모가 낮으며 신뢰성도 뛰어난 비휘발성 반도체 기억장치
    - Flash EEPROM
- 동작 원리
    - 구현에 NMOS 트랜지스터가 사용된다
        - 드레인
        - 소스
        - 게이트
    - 일반적인 NMOS 트랜지스터에서와 다르게 플래시 메모리에서는 두 개의 게이트를 사용한다.
        - 제어 게이트
        - 부동 게이트
            - 정보 저장의 핵심적인 역할을 한다.
            - 절연체인 산화막(SiO2)로 둘러싸여있다.
                - 전자들이 쉽게 들어오거나 나가지 못한다.
                - 초기에는 비어있는 상태
  
- Vd에 양의 전압이 걸리고 소스는 접지된 상태에서
    1. Vg에 적절한 전압이 걸리면 드레인과 소스 사이의 N-채널을 통하여 전자들이 이동하고 전류가 흐른다.
    2. Vg에 충분히 높은 전압이 걸리면 터널링 효과가 발생한다.
        - 즉, N-채널을 통과하던 전자 일부가 절연체인 산화막을 통과하여 부동 게이트로 들어간다.
        - 부동 게이트로 전자가 흘러 들어가는 것을 터널 주입이라고 한다.
- 쓰기
    - “1번 → 2번 → 1번”로 발생하면 전자가 부동 게이트에 갖힌다.
    - 쓰기는 페이지 단위로 이루어진다.
- 삭제
    - 정보가 저장된 상태에서, 하위에 P층에 충분히 높은 전압 Vp를 가하면 부동 게이트에서 전자가 빠져나온다.
    - 삭제는 블록 단위로 이루어진다.
- 읽기
    - 1번 상태에서 Vg때문에
        - 부동게이트가 비어있다면(1 저장 상태)
            - P층에 있던 정공들이 아래로 밀려나서 N-채널이 더 넓어진다.
            - 드레인과 소스 사이에 더 많은 전류가 흐를 수 있게 되어
            - 트랜지스터는 ON 상태가 된다
        - 부동게이트가 전자들로 채워져 있다면(0 저장 상태)
            - 부동 게이트 안의 전자들이 Vg의 전기장을 차단해서 N-채널은 넓어지지 못한다.
            - 그래서 전류가 매우 적게 흐르고 이는 트랜지스터의 OFF 상태를 의미한다.
- 용어
    
    - Vcc, Vdd, Vee, Vss
        - V는 전압 전원
        - cc: collector
        - dd: drain
        - ee: emitter
        - ss: source
    - BJT
        - Bipolar Junction Transistor
        - 전원 종류로 collector, emitter 전원이 있다.
    - FET
        - Field Effect Transistor
        - 전원 종류로 drain, source 전원이 있다.
            - Vd는 +전원으로 연결한다.
            - Vs는 -전원 또는 GND(접지)를 연결한다.
        - 반도체 집적회로에는 FET를 사용한다.
            - 플래시메모리, DRAM에 사용한다.
    
    ![[Source/Untitled 133.png|Untitled 133.png]]
    
    - NMOS 트랜지스터
        - Vg 높을 때
            - 소스(S)와 드레인(D)이 연결
        - Vg 낮을 때
            - S와 D의 연결이 끊어짐
    - PMOS 트랜지스터
        - Vg 높을 때
            - S, D 끊어짐
        - Vg 낮을 때
            - S, D 연결
![[Source/Untitled 1 87.png|Untitled 1 87.png]]
![[Source/Untitled 2 59.png|Untitled 2 59.png]]
- NOR 형 플래시 메모리
    - 메모리 셀 배열이 NMOS 트랜지스터들의 병렬 접속으로 구성
        - 병렬 접속
            - 전원(Vcc)이 비트 라인(BL)을 통하여 모든 트랜지스터들의 드레인으로 직접 공급
            - 트랜지스터들의 소스는 접지로 접속
        - 각 트랜지스터의 독립적 스위칭 동작 가능(셀 단위 액세스 가능)
- NAND형 플래시 메모리
    - 메모리 셀 배열이 NMOS 트랜지스터들의 직렬 접속으로 구성
        - 직렬 접속
            - 전원이 첫 번째 트랜지스터의 드레인으로만 접속됨
            - 소스가 다음 트랜지스터의 트랜지스터의 드레인으로 접속
            - 마지막 트랜지스터의 소스만 접지
        - 트랜지스터의 독립적 스위칭 동작 불가능(셀 단위 액세스 불가능)
  
- NOR형, NAND형 비교
    - NOR형
        - 셀 단위 읽기와 쓰기 가능
            - 고정된 프로그램 코드를 순차적으로 인출하거나 작은 크기의 데이터를 수시로 읽고 쓰는 응용에 사용될 수 있다.
            - PC의 BIOS, 스마트폰 및 PDA의 OS 저장장치로 사용됨
        - 비교적 읽는 속도는 빠르다.
        - 삭제와 쓰기 속도는 느리다.
        - 트랜지스터 당 접속선의 수: 3개
            
            - 공간 차지가 많다.
            - 칩 당 저장용량이 줄어든다.
            
              
            
    - NAND형
        - 셀 단위 읽기와 쓰기 불가능, 페이지 단위만 가능하다.
        - 삭제와 쓰기 속도 빠르다.
        - 읽기 속도가 느리다.
        - 트랜지스터 당 접속선의 수: 1개
            
            - 칩 당 저장 밀도 NOR형보다 크다.
            
              
            
p.40~47 따로 공부하기
==NMOS, PMOS 에 대해 공부하기==
  
- SLC
    - single-level cell
    - 한 비트 저장
        - 전자 차있으면 0
        - 전자 없으면 1
- MLC
    - multi-level cell
    - 두 비트 저장
        - 셀의 상태를 4가지로 구분
        - 전자 3줄 00
        - 전자 2줄 01
        - 전자 1줄 10
        - 전자 0줄 11
- TLC
    - triple-level-cell
    - 세 비트 저장
- MLC, TLC의 문제점
    
    - 전자수 조정에 세밀한 작업 필요
    - 데이터 구분의 어려움으로 액세스 속도 저하
    - 오류 발생 빈도 증가
    - 수명 단축
    
      
    
      
    
## 6.3.2 SSD
- SSD
    - HDD를 대체하는 대용량 비휘발성 반도체 저장장치
    - 저장밀도가 높은 NAND형 플래시 메모리로 구성
    - 다수의 플래시 메모리들을 배열로 구성하여 패키징
    - 장점
        - 높은 안정성 및 신뢰도
    - 단점
        - 저장용량 대비 가격이 HDD에 비해 높다
- SSD 내부 조직
    - 플래시 메모리 배열
    - SSD 제어기
        - 하는 일
            - 데이터 저장과 인출
            - 칩 관리
            - 주소 변환
        - 미들웨어인 FTL 프로그램을 수행하는 프로세서로 구현
    - DRAM
        - 컴퓨터와 플래시 메모리 사이의 데이터 버ㅓ
    - 외부 인터페이스
        - SATA, PCIe 등을 이용한 직렬 전송
- FTL
    - Flash Translation Layer
    - 기존의 파일시스템, OS로 하여금 기존 HDD에 했던 방법으로 SSD를 사용할 수 있도록 지원해주는 미들웨어
    - SSD 제어기가 수행
    - 페이지 주소와 섹터 주소간의 매핑 기능 수행
    - 또한, 성능 향상을 위해 아래 기능들 수행
        - 마모 평준화
            - 모든 페이지들이 고르게 사용되도록 저장 위치 조정
            - 각 페이지의 사용 횟수를 페이지 레지스터에 기록
                - 이를 참고하여 쓰기 동작 수행
                - 기록 횟수가 적은 페이지 우선 사용
        - 쓰레기 수집
            
            - 쓰레기
                - 더이상 사용할 필요 없는 데이터
                - 업데이트 이전의 데이터는 쓰레기이다
            - 쓰레기가 많은 블럭을 완전히 삭제한다.
            - 그림 6-20 참고
                - 유효 페이지만 다른 블록으로 옮기고 쓰레기는 삭제한다.
                - p.63
            - TRIM 명령
                - 삭제 동작을 똑똑하게 해서 무효 페이지가 가능한 많은 상태에서 삭제 수행
                - 삭제 횟수를 최소화시켜준다.
            
              
            
        - 초과 대비공간
            - 마모 평준화를 위해 여분의 공간을 항상 제공한다.
            - 그냥 추가 저장공간을 껴서 제품을 만든다.
                - 특별한 기술이 아니라 하드웨어를 더 껴주는 것이다.